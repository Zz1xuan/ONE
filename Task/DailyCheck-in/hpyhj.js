/**************************************
@Name：微信小程序 HAPI哈啤硬核街 签到
@Author：Sliverkiss
@Date：2023-10-02 12:12:16

脚本兼容：Surge、QuantumultX、Loon、Shadowrocket、Node.js
只测试过loon和青龙，其它环境请自行尝试

使用方法：
青龙：
1.登录后抓包 bg-hardcore.ab-inbev.cn域名下的openId、sign、timestamp,分别用#连接，如openId#sign#timestamp，填写到hapi_data,多账号用 @ 分割
2.可选推送：将bark的key填写到bark_key，不填默认使用青龙自带的推送

Loon: 
1.将获取Cookie脚本保存到本地
2.打开小程序->我的，若提示获取Cookie成功则可以使用该脚本
3.关闭获取ck脚本，避免产生不必要的mitm。

[Script]
cron "3 3 * * *" script-path=hpyhj.js, timeout=300, tag=HAPI哈啤硬核街
http-request ^https:\/\/bg-hardcore.ab-inbev.cn\/api\/userCenter\/getUserCenterInfo script-path=hpyhj.js, timeout=10, tag=HAPI哈啤硬核街获取token
[MITM]
hostname =bg-hardcore.ab-inbev.cn

====================================
⚠️【免责声明】
------------------------------------------
1、此脚本仅用于学习研究，不保证其合法性、准确性、有效性，请根据情况自行判断，本人对此不承担任何保证责任。
2、由于此脚本仅用于学习研究，您必须在下载后 24 小时内将所有内容从您的计算机或手机或任何存储设备中完全删除，若违反规定引起任何事件本人对此均不负责。
3、请勿将此脚本用于任何商业或非法目的，若违反规定请自行对此负责。
4、此脚本涉及应用与本人无关，本人对因此引起的任何隐私泄漏或其他后果不承担任何责任。
5、本人对任何脚本引发的问题概不负责，包括但不限于由脚本错误引起的任何损失和损害。
6、如果任何单位或个人认为此脚本可能涉嫌侵犯其权利，应及时通知并提供身份证明，所有权证明，我们将在收到认证文件确认后删除此脚本。
7、所有直接或间接使用、查看此脚本的人均应该仔细阅读此声明。本人保留随时更改或补充此声明的权利。一旦您使用或复制了此脚本，即视为您已接受此免责声明。
******************************************/

// env.js 全局
const _0x2ea2dc=_0x109f;(function(_0x57e34c,_0x11a531){const _0x3a5c0e=_0x109f,_0x36bca5=_0x57e34c();while(!![]){try{const _0x3595a8=parseInt(_0x3a5c0e(0x1ea))/0x1*(-parseInt(_0x3a5c0e(0x1ed))/0x2)+-parseInt(_0x3a5c0e(0x204))/0x3+-parseInt(_0x3a5c0e(0x1e9))/0x4+-parseInt(_0x3a5c0e(0x23d))/0x5+-parseInt(_0x3a5c0e(0x272))/0x6*(-parseInt(_0x3a5c0e(0x248))/0x7)+parseInt(_0x3a5c0e(0x224))/0x8*(parseInt(_0x3a5c0e(0x1f8))/0x9)+parseInt(_0x3a5c0e(0x22d))/0xa;if(_0x3595a8===_0x11a531)break;else _0x36bca5['push'](_0x36bca5['shift']());}catch(_0x1e2436){_0x36bca5['push'](_0x36bca5['shift']());}}}(_0xa71f,0xb6c5b));const $=new Env(_0x2ea2dc(0x1b3)),ckName=_0x2ea2dc(0x1ee),Notify=0x1,notify=$[_0x2ea2dc(0x1cf)]()?require('./sendNotify'):'';let envSplitor=['@'],userCookie=($[_0x2ea2dc(0x1cf)]()?process['env'][ckName]:$['getdata'](ckName))||'',userList=[],userIdx=0x0,userCount=0x0;$[_0x2ea2dc(0x1d7)]=[],$[_0x2ea2dc(0x1dc)]=($[_0x2ea2dc(0x1cf)]()?process[_0x2ea2dc(0x225)][_0x2ea2dc(0x1f6)]:$[_0x2ea2dc(0x232)](_0x2ea2dc(0x1f6)))||'';async function main(){const _0xb9d0f=_0x2ea2dc;console['log'](_0xb9d0f(0x1db));let _0x59a06d=[];for(let _0x2f2b86 of userList){_0x2f2b86['ckStatus']?(console['log'](_0xb9d0f(0x222)+_0x2f2b86[_0xb9d0f(0x257)]()+'ms'),_0x59a06d[_0xb9d0f(0x24e)](await _0x2f2b86[_0xb9d0f(0x237)]()),await $['wait'](_0x2f2b86[_0xb9d0f(0x257)]())):$[_0xb9d0f(0x1d7)][_0xb9d0f(0x24e)](_0xb9d0f(0x250)+_0x2f2b86['index']+_0xb9d0f(0x1c6));}await Promise[_0xb9d0f(0x1bc)](_0x59a06d),console[_0xb9d0f(0x25a)](_0xb9d0f(0x22c)),_0x59a06d=[];for(let _0x45a67c of userList){_0x45a67c['ckStatus']?(console[_0xb9d0f(0x25a)]('随机延迟'+_0x45a67c[_0xb9d0f(0x257)]()+'ms'),_0x59a06d[_0xb9d0f(0x24e)](await _0x45a67c[_0xb9d0f(0x21a)]()),await $['wait'](_0x45a67c[_0xb9d0f(0x257)]())):$[_0xb9d0f(0x1d7)][_0xb9d0f(0x24e)](_0xb9d0f(0x250)+_0x45a67c[_0xb9d0f(0x228)]+_0xb9d0f(0x1c6));}await Promise[_0xb9d0f(0x1bc)](_0x59a06d);}class UserInfo{constructor(_0x48d5d5){const _0x48794f=_0x2ea2dc;this[_0x48794f(0x228)]=++userIdx,this[_0x48794f(0x270)]=_0x48d5d5[_0x48794f(0x23a)]('#'),this[_0x48794f(0x24b)]=this[_0x48794f(0x270)][0x0],this[_0x48794f(0x1d0)]=this[_0x48794f(0x270)][0x1],this['timestamp']=this[_0x48794f(0x270)][0x2],this[_0x48794f(0x256)]=!![],this['headers']={'User-Agent':_0x48794f(0x1b2),'openId':this[_0x48794f(0x24b)],'sign':this['sign'],'timestamp':this[_0x48794f(0x202)],'Content-Type':_0x48794f(0x252)},this['body']=_0x48794f(0x25d)+this[_0x48794f(0x24b)];}[_0x2ea2dc(0x257)](){return randomInt(0x3e8,0xbb8);}async[_0x2ea2dc(0x229)](){const _0x142123=_0x2ea2dc;try{const _0x16b81c={'url':_0x142123(0x203),'headers':this[_0x142123(0x246)],'body':this['body']};let _0x14f455=await httpRequest(_0x16b81c);_0x14f455?.[_0x142123(0x267)]==0x0?(this[_0x142123(0x1ef)]=_0x142123(0x1f7)+_0x14f455?.[_0x142123(0x26c)]?.[_0x142123(0x21a)]+'分',console[_0x142123(0x25a)](this['msg'])):console[_0x142123(0x25a)](_0x142123(0x20a));}catch(_0x2b38fd){console[_0x142123(0x25a)](_0x2b38fd);}}async[_0x2ea2dc(0x237)](){const _0x2cdeca=_0x2ea2dc;try{const _0x93fb41={'url':'https://bg-hardcore.ab-inbev.cn/api/checkin/userIsCheckin','headers':this['headers'],'body':this[_0x2cdeca(0x215)]};let _0x32170b=await httpRequest(_0x93fb41);_0x32170b?.[_0x2cdeca(0x267)]==!-0x1?(await this['signin'](),console[_0x2cdeca(0x25a)](_0x2cdeca(0x1e1))):(console[_0x2cdeca(0x25a)](_0x2cdeca(0x216)),this['msg']=_0x2cdeca(0x216));}catch(_0x5c4d5c){console['log'](_0x5c4d5c);}}async['point'](){const _0x56b6b8=_0x2ea2dc;try{const _0x43ba8a={'url':'https://bg-hardcore.ab-inbev.cn/api/userCenter/getUserCenterInfo','headers':this[_0x56b6b8(0x246)],'body':this[_0x56b6b8(0x215)]};let _0x452693=await httpRequest(_0x43ba8a);DoubleLog('【'+_0x452693?.[_0x56b6b8(0x26c)]?.['username']+'】'+this[_0x56b6b8(0x1ef)]+_0x56b6b8(0x213)+_0x452693?.[_0x56b6b8(0x26c)]?.[_0x56b6b8(0x1eb)]+_0x56b6b8(0x26e)+_0x452693?.[_0x56b6b8(0x26c)]?.[_0x56b6b8(0x259)]+'分');}catch(_0x28a406){console[_0x56b6b8(0x25a)](_0x28a406);}}}async function getCookie(){const _0x2c4357=_0x2ea2dc;if($request&&$request[_0x2c4357(0x265)]!=_0x2c4357(0x205)){const _0xad20d9=$request[_0x2c4357(0x246)][_0x2c4357(0x23e)]||$request[_0x2c4357(0x246)][_0x2c4357(0x24b)],_0x2a9b36=$request['headers'][_0x2c4357(0x1d0)]||$request['headers'][_0x2c4357(0x1c8)],_0x2e8a8e=$request[_0x2c4357(0x246)][_0x2c4357(0x202)]||$request[_0x2c4357(0x246)][_0x2c4357(0x1c7)];if(_0xad20d9&&_0x2a9b36&&_0x2e8a8e){const _0xe6d91d=_0xad20d9+'#'+_0x2a9b36+'#'+_0x2e8a8e;$[_0x2c4357(0x20d)](_0xe6d91d,ckName),$[_0x2c4357(0x1ef)]($[_0x2c4357(0x1d9)],'','获取签到Cookie成功🎉');}else $[_0x2c4357(0x1ef)]($[_0x2c4357(0x1d9)],'','错误获取签到Cookie失败');}}!(async()=>{const _0x2c3c51=_0x2ea2dc;if(typeof $request!='undefined'){await getCookie();return;}if(!await checkEnv())throw new Error(_0x2c3c51(0x211));;userList['length']>0x0&&await main();$['barkKey']&&await BarkNotify($,$['barkKey'],$[_0x2c3c51(0x1d9)],$[_0x2c3c51(0x1d7)]['join']('\x0a'));;})()[_0x2ea2dc(0x1f9)](_0x547d02=>$[_0x2ea2dc(0x1d7)][_0x2ea2dc(0x24e)](_0x547d02[_0x2ea2dc(0x1f5)]||_0x547d02))['finally'](async()=>{const _0x4d69f9=_0x2ea2dc;await SendMsg($[_0x4d69f9(0x1d7)][_0x4d69f9(0x26a)]('\x0a')),$[_0x4d69f9(0x223)]();});function DoubleLog(_0x35908e){const _0x51ab41=_0x2ea2dc;$[_0x51ab41(0x1cf)]()?_0x35908e&&(console['log'](''+_0x35908e),$[_0x51ab41(0x1d7)]['push'](''+_0x35908e)):(console['log'](''+_0x35908e),$[_0x51ab41(0x1d7)]['push'](''+_0x35908e));}function toParams(_0x18e45c){const _0x3ef028=_0x2ea2dc;var _0x5f25ab=Object[_0x3ef028(0x207)](_0x18e45c)['map'](function(_0x4280a9){return encodeURIComponent(_0x4280a9)+'='+encodeURIComponent(_0x18e45c[_0x4280a9]);})['join']('&');return _0x5f25ab;}async function checkEnv(){const _0x5614bc=_0x2ea2dc;if(userCookie){let _0x2cb13d=envSplitor[0x0];for(let _0x42ed78 of envSplitor)if(userCookie[_0x5614bc(0x258)](_0x42ed78)>-0x1){_0x2cb13d=_0x42ed78;break;}for(let _0x568dbc of userCookie['split'](_0x2cb13d))_0x568dbc&&userList['push'](new UserInfo(_0x568dbc));userCount=userList[_0x5614bc(0x1bd)];}else{console[_0x5614bc(0x25a)](_0x5614bc(0x25e));return;}return console[_0x5614bc(0x25a)](_0x5614bc(0x26b)+userCount+_0x5614bc(0x1fe)),!![];}function randomInt(_0x59ae00,_0x2cf9c8){return Math['round'](Math['random']()*(_0x2cf9c8-_0x59ae00)+_0x59ae00);}async function SendMsg(_0x85e1c){const _0x38db05=_0x2ea2dc;if(!_0x85e1c)return;Notify>0x0?$[_0x38db05(0x1cf)]()?await notify[_0x38db05(0x218)]($[_0x38db05(0x1d9)],_0x85e1c):$['msg']($[_0x38db05(0x1d9)],'',_0x85e1c):console['log'](_0x85e1c);}function _0x109f(_0x3f3f4a,_0x1043e0){const _0xa71f15=_0xa71f();return _0x109f=function(_0x109f5a,_0x5a92f5){_0x109f5a=_0x109f5a-0x1b2;let _0xbb6f85=_0xa71f15[_0x109f5a];return _0xbb6f85;},_0x109f(_0x3f3f4a,_0x1043e0);}function httpRequest(_0x47fd8e,_0x103788){const _0x55a9f5=_0x2ea2dc;return typeof _0x103788===_0x55a9f5(0x217)?'body'in _0x47fd8e?_0x103788='post':_0x103788=_0x55a9f5(0x1b7):_0x103788=_0x103788,new Promise(_0x128373=>{$[_0x103788](_0x47fd8e,(_0x5b2454,_0x558d94,_0x2ed5b3)=>{const _0x310147=_0x109f;try{_0x5b2454?(console['log'](_0x103788+'请求失败'),$[_0x310147(0x1bb)](_0x5b2454)):_0x2ed5b3?(typeof JSON['parse'](_0x2ed5b3)==_0x310147(0x1e4)?_0x2ed5b3=JSON[_0x310147(0x1cb)](_0x2ed5b3):_0x2ed5b3=_0x2ed5b3,_0x128373(_0x2ed5b3)):console[_0x310147(0x25a)](_0x310147(0x22e));}catch(_0x167e16){$[_0x310147(0x1bb)](_0x167e16,_0x558d94);}finally{_0x128373();}});});}async function BarkNotify(_0x3a9d1f,_0xe4cd7,_0x2f0d2a,_0x48ab48){const _0x4405e7=_0x2ea2dc;for(let _0x1b8105=0x0;_0x1b8105<0x3;_0x1b8105++){console['log'](_0x4405e7(0x263)+(_0x1b8105+0x1)+')');const _0x13e6ca=await new Promise(_0x238dae=>{const _0x4c186d=_0x4405e7;_0x3a9d1f[_0x4c186d(0x24a)]({'url':'https://api.day.app/push','headers':{'Content-Type':_0x4c186d(0x251)},'body':JSON['stringify']({'title':_0x2f0d2a,'body':_0x48ab48,'device_key':_0xe4cd7,'ext_params':{'group':_0x2f0d2a}})},(_0x36f8bb,_0x3616d9,_0x2bafa9)=>_0x3616d9&&_0x3616d9[_0x4c186d(0x1be)]==0xc8?_0x238dae(0x1):_0x238dae(_0x2bafa9||_0x36f8bb));});if(_0x13e6ca===0x1){console[_0x4405e7(0x25a)](_0x4405e7(0x1e7));break;}else console[_0x4405e7(0x25a)](_0x4405e7(0x1f4)+(_0x13e6ca[_0x4405e7(0x1f5)]||_0x13e6ca));}};function _0xa71f(){const _0x2a1e4f=['writedata','method','isMuteLog','code','replace','isShadowrocket','join','共找到','data',',\x20错误!','天,当前','opts','ckInfo','setCookieSync','289032ZYOxRN','\x20Mozilla/5.0\x20(iPad;\x20CPU\x20OS\x2017_0\x20like\x20Mac\x20OS\x20X)\x20AppleWebKit/605.1.15\x20(KHTML,\x20like\x20Gecko)\x20Mobile/15E148\x20MicroMessenger/8.0.34(0x18002234)\x20NetType/WIFI\x20Language/zh_CN','HAPI哈啤硬核街','fetch','ckjar','getjson','get','timeout','Loon','Node.js','logErr','all','length','status','stringify','getval','path','isSurge','redirect','updatePasteboard','isArray','\x20>>\x20Check\x20ck\x20error!','Timestamp','Sign','getMilliseconds','dataFile','parse','rawBody','setValueForKey','getMonth','isNode','sign','params','url','set-cookie','==============📣系统通知📣==============','stack','Shadowrocket','notifyMsg','lodash_set','name','mediaUrl','\x0a==================\x20任务\x20==================\x0a','barkKey','then','cktough','startTime','loaddata','今日未签到，开始签到...','POST','reduce','object','exports','existsSync','✅Push\x20success!','utf-8','4916036cqnQom','58143MKmDBs','joinDays','Content-Type','14hpIPXB','hapi_data','msg','getEnv','trim','/v1/scripting/evaluate','time','❌Push\x20failed!\x20>>\x20','message','bark_key','签到成功！获得','9fRBkvX','catch','Quantumult\x20X','Stash','http','tough-cookie','个账号','toStr','toObj','cwd','timestamp','https://bg-hardcore.ab-inbev.cn/api/checkin/dailyCheckIn','3135894ibdRmf','OPTIONS','write','keys','lodash_get','floor','签到失败！','open-url','UndefinedError','setdata','isMute','substr','getDate','❌未检测到ck，请添加环境变量','content-length',',累计签到','Surge','body','今日已签到','undefined','sendNotify','*/*','point',',\x20开始!','abs','got','cron','read','null','call','随机延迟','done','2236856nHKJUI','env','writeFileSync','statusCode','index','signin','exit','content-type','\x0a=================\x20用户信息\x20=================\x0a','23643500NsWbRR','请求api返回数据为空，请检查自身原因','openUrl','GET','decode','getdata','readFileSync','test','isLoon','.$1','userIsCheckin','queryStr','toString','split','send','getSeconds','164690cRocSw','openId','isNeedRewrite','logs','concat','encoding','update-pasteboard','slice','getTime','headers',',\x20结束!\x20🕛\x20','119ZRyjtw','valueForKey','post','openid','iconv-lite','media-url','push','string','❌账号','application/json','application/x-www-form-urlencoded','runScript','logSeparator','cookieJar','ckStatus','getRandomTime','indexOf','userPoints','log','assign','http://','openId=','未找到CK','Content-Length','substring','setval','resolve','🔷Bark\x20notify\x20>>\x20Start\x20push\x20('];_0xa71f=function(){return _0x2a1e4f;};return _0xa71f();}function Env(_0x49e302,_0x2bcf1b){const _0x4b89be=_0x2ea2dc;class _0x26bea4{constructor(_0x2c9b82){const _0x1e9ddc=_0x109f;this[_0x1e9ddc(0x225)]=_0x2c9b82;}[_0x4b89be(0x23b)](_0x5c1229,_0x51c071=_0x4b89be(0x230)){const _0xffbe12=_0x4b89be;_0x5c1229=_0xffbe12(0x24f)==typeof _0x5c1229?{'url':_0x5c1229}:_0x5c1229;let _0x474946=this[_0xffbe12(0x1b7)];return _0xffbe12(0x1e2)===_0x51c071&&(_0x474946=this[_0xffbe12(0x24a)]),new Promise((_0x53e219,_0x2882da)=>{const _0x250d9a=_0xffbe12;_0x474946[_0x250d9a(0x221)](this,_0x5c1229,(_0x5634d6,_0x38f5db,_0x2e740c)=>{_0x5634d6?_0x2882da(_0x5634d6):_0x53e219(_0x38f5db);});});}[_0x4b89be(0x1b7)](_0x2be99a){const _0x4d5f7d=_0x4b89be;return this['send'][_0x4d5f7d(0x221)](this[_0x4d5f7d(0x225)],_0x2be99a);}[_0x4b89be(0x24a)](_0x5a1eca){const _0x362813=_0x4b89be;return this[_0x362813(0x23b)][_0x362813(0x221)](this[_0x362813(0x225)],_0x5a1eca,_0x362813(0x1e2));}}return new class{constructor(_0x28aedb,_0x20e4f5){const _0x4c252c=_0x4b89be;this[_0x4c252c(0x1d9)]=_0x28aedb,this[_0x4c252c(0x1fc)]=new _0x26bea4(this),this['data']=null,this['dataFile']='box.dat',this[_0x4c252c(0x240)]=[],this[_0x4c252c(0x20e)]=!0x1,this['isNeedRewrite']=!0x1,this[_0x4c252c(0x254)]='\x0a',this[_0x4c252c(0x242)]=_0x4c252c(0x1e8),this[_0x4c252c(0x1df)]=new Date()['getTime'](),Object[_0x4c252c(0x25b)](this,_0x20e4f5),this['log']('','🔔'+this[_0x4c252c(0x1d9)]+_0x4c252c(0x21b));}['getEnv'](){const _0x2d33c7=_0x4b89be;return _0x2d33c7(0x217)!=typeof $environment&&$environment['surge-version']?_0x2d33c7(0x214):_0x2d33c7(0x217)!=typeof $environment&&$environment['stash-version']?_0x2d33c7(0x1fb):'undefined'!=typeof module&&module[_0x2d33c7(0x1e5)]?'Node.js':'undefined'!=typeof $task?_0x2d33c7(0x1fa):_0x2d33c7(0x217)!=typeof $loon?_0x2d33c7(0x1b9):_0x2d33c7(0x217)!=typeof $rocket?_0x2d33c7(0x1d6):void 0x0;}[_0x4b89be(0x1cf)](){const _0x2b9d87=_0x4b89be;return _0x2b9d87(0x1ba)===this[_0x2b9d87(0x1f0)]();}['isQuanX'](){const _0x413103=_0x4b89be;return _0x413103(0x1fa)===this[_0x413103(0x1f0)]();}[_0x4b89be(0x1c2)](){const _0x2c3575=_0x4b89be;return _0x2c3575(0x214)===this['getEnv']();}[_0x4b89be(0x235)](){const _0x322447=_0x4b89be;return _0x322447(0x1b9)===this[_0x322447(0x1f0)]();}[_0x4b89be(0x269)](){const _0x43b563=_0x4b89be;return'Shadowrocket'===this[_0x43b563(0x1f0)]();}['isStash'](){return'Stash'===this['getEnv']();}[_0x4b89be(0x200)](_0x3a162c,_0x151a8a=null){const _0x1b6176=_0x4b89be;try{return JSON[_0x1b6176(0x1cb)](_0x3a162c);}catch{return _0x151a8a;}}[_0x4b89be(0x1ff)](_0x531a76,_0x200882=null){try{return JSON['stringify'](_0x531a76);}catch{return _0x200882;}}[_0x4b89be(0x1b6)](_0x40bf1f,_0x19e6d4){const _0x288044=_0x4b89be;let _0x304a44=_0x19e6d4;const _0xd04b3a=this[_0x288044(0x232)](_0x40bf1f);if(_0xd04b3a)try{_0x304a44=JSON[_0x288044(0x1cb)](this[_0x288044(0x232)](_0x40bf1f));}catch{}return _0x304a44;}['setjson'](_0x38a1bf,_0x472ff2){const _0x2be476=_0x4b89be;try{return this[_0x2be476(0x20d)](JSON[_0x2be476(0x1bf)](_0x38a1bf),_0x472ff2);}catch{return!0x1;}}['getScript'](_0x44809a){return new Promise(_0x60ac40=>{const _0x127739=_0x109f;this[_0x127739(0x1b7)]({'url':_0x44809a},(_0x4434ee,_0x4c4f12,_0x569e99)=>_0x60ac40(_0x569e99));});}[_0x4b89be(0x253)](_0x47ef43,_0x1e7dae){const _0x3b8d93=_0x4b89be;return new Promise(_0x281d07=>{const _0x31c6d3=_0x109f;let _0x5b9ac0=this[_0x31c6d3(0x232)]('@chavy_boxjs_userCfgs.httpapi');_0x5b9ac0=_0x5b9ac0?_0x5b9ac0[_0x31c6d3(0x268)](/\n/g,'')[_0x31c6d3(0x1f1)]():_0x5b9ac0;let _0x5064e0=this[_0x31c6d3(0x232)]('@chavy_boxjs_userCfgs.httpapi_timeout');_0x5064e0=_0x5064e0?0x1*_0x5064e0:0x14,_0x5064e0=_0x1e7dae&&_0x1e7dae['timeout']?_0x1e7dae[_0x31c6d3(0x1b8)]:_0x5064e0;const [_0x13d9f0,_0x1907c0]=_0x5b9ac0['split']('@'),_0x4ee874={'url':_0x31c6d3(0x25c)+_0x1907c0+_0x31c6d3(0x1f2),'body':{'script_text':_0x47ef43,'mock_type':_0x31c6d3(0x21e),'timeout':_0x5064e0},'headers':{'X-Key':_0x13d9f0,'Accept':_0x31c6d3(0x219)},'timeout':_0x5064e0};this[_0x31c6d3(0x24a)](_0x4ee874,(_0x18218c,_0xa1ae0e,_0x3970b0)=>_0x281d07(_0x3970b0));})['catch'](_0x3e7a3d=>this[_0x3b8d93(0x1bb)](_0x3e7a3d));}['loaddata'](){const _0x391629=_0x4b89be;if(!this[_0x391629(0x1cf)]())return{};{this['fs']=this['fs']?this['fs']:require('fs'),this[_0x391629(0x1c1)]=this[_0x391629(0x1c1)]?this[_0x391629(0x1c1)]:require(_0x391629(0x1c1));const _0x3d5fe7=this['path'][_0x391629(0x262)](this['dataFile']),_0x1681fb=this[_0x391629(0x1c1)][_0x391629(0x262)](process[_0x391629(0x201)](),this[_0x391629(0x1ca)]),_0x1ad053=this['fs'][_0x391629(0x1e6)](_0x3d5fe7),_0x402757=!_0x1ad053&&this['fs'][_0x391629(0x1e6)](_0x1681fb);if(!_0x1ad053&&!_0x402757)return{};{const _0x5bd8a4=_0x1ad053?_0x3d5fe7:_0x1681fb;try{return JSON['parse'](this['fs'][_0x391629(0x233)](_0x5bd8a4));}catch(_0x42673a){return{};}}}}[_0x4b89be(0x264)](){const _0x28529f=_0x4b89be;if(this['isNode']()){this['fs']=this['fs']?this['fs']:require('fs'),this['path']=this[_0x28529f(0x1c1)]?this['path']:require('path');const _0x19e86e=this[_0x28529f(0x1c1)][_0x28529f(0x262)](this[_0x28529f(0x1ca)]),_0x5d2c97=this[_0x28529f(0x1c1)][_0x28529f(0x262)](process[_0x28529f(0x201)](),this['dataFile']),_0x1a828c=this['fs'][_0x28529f(0x1e6)](_0x19e86e),_0x2ed3ce=!_0x1a828c&&this['fs']['existsSync'](_0x5d2c97),_0x19ea3c=JSON[_0x28529f(0x1bf)](this['data']);_0x1a828c?this['fs'][_0x28529f(0x226)](_0x19e86e,_0x19ea3c):_0x2ed3ce?this['fs'][_0x28529f(0x226)](_0x5d2c97,_0x19ea3c):this['fs'][_0x28529f(0x226)](_0x19e86e,_0x19ea3c);}}[_0x4b89be(0x208)](_0x2af180,_0x15588d,_0x450587){const _0x3391ba=_0x4b89be,_0x243401=_0x15588d[_0x3391ba(0x268)](/\[(\d+)\]/g,_0x3391ba(0x236))['split']('.');let _0x2bd59a=_0x2af180;for(const _0x5ce16f of _0x243401)if(_0x2bd59a=Object(_0x2bd59a)[_0x5ce16f],void 0x0===_0x2bd59a)return _0x450587;return _0x2bd59a;}[_0x4b89be(0x1d8)](_0x10cec4,_0x4032f8,_0x38870f){const _0x4533f8=_0x4b89be;return Object(_0x10cec4)!==_0x10cec4?_0x10cec4:(Array[_0x4533f8(0x1c5)](_0x4032f8)||(_0x4032f8=_0x4032f8[_0x4533f8(0x239)]()['match'](/[^.[\]]+/g)||[]),_0x4032f8[_0x4533f8(0x244)](0x0,-0x1)[_0x4533f8(0x1e3)]((_0x57c6de,_0x34d729,_0x56db6f)=>Object(_0x57c6de[_0x34d729])===_0x57c6de[_0x34d729]?_0x57c6de[_0x34d729]:_0x57c6de[_0x34d729]=Math[_0x4533f8(0x21c)](_0x4032f8[_0x56db6f+0x1])>>0x0==+_0x4032f8[_0x56db6f+0x1]?[]:{},_0x10cec4)[_0x4032f8[_0x4032f8[_0x4533f8(0x1bd)]-0x1]]=_0x38870f,_0x10cec4);}[_0x4b89be(0x232)](_0x75d03b){const _0xab55ae=_0x4b89be;let _0x2f7a1e=this[_0xab55ae(0x1c0)](_0x75d03b);if(/^@/[_0xab55ae(0x234)](_0x75d03b)){const [,_0x5ca721,_0x55f8a9]=/^@(.*?)\.(.*?)$/['exec'](_0x75d03b),_0x167b53=_0x5ca721?this[_0xab55ae(0x1c0)](_0x5ca721):'';if(_0x167b53)try{const _0x499944=JSON['parse'](_0x167b53);_0x2f7a1e=_0x499944?this['lodash_get'](_0x499944,_0x55f8a9,''):_0x2f7a1e;}catch(_0x135112){_0x2f7a1e='';}}return _0x2f7a1e;}[_0x4b89be(0x20d)](_0x4eaa1a,_0x583372){const _0x4a9b85=_0x4b89be;let _0x381e6d=!0x1;if(/^@/['test'](_0x583372)){const [,_0xca354,_0x5e1b46]=/^@(.*?)\.(.*?)$/['exec'](_0x583372),_0x250aa7=this[_0x4a9b85(0x1c0)](_0xca354),_0x149da5=_0xca354?_0x4a9b85(0x220)===_0x250aa7?null:_0x250aa7||'{}':'{}';try{const _0x303901=JSON[_0x4a9b85(0x1cb)](_0x149da5);this[_0x4a9b85(0x1d8)](_0x303901,_0x5e1b46,_0x4eaa1a),_0x381e6d=this[_0x4a9b85(0x261)](JSON[_0x4a9b85(0x1bf)](_0x303901),_0xca354);}catch(_0xd6a73c){const _0x51c1a2={};this[_0x4a9b85(0x1d8)](_0x51c1a2,_0x5e1b46,_0x4eaa1a),_0x381e6d=this['setval'](JSON['stringify'](_0x51c1a2),_0xca354);}}else _0x381e6d=this['setval'](_0x4eaa1a,_0x583372);return _0x381e6d;}['getval'](_0xe96189){const _0x42fea1=_0x4b89be;switch(this[_0x42fea1(0x1f0)]()){case'Surge':case _0x42fea1(0x1b9):case'Stash':case _0x42fea1(0x1d6):return $persistentStore[_0x42fea1(0x21f)](_0xe96189);case _0x42fea1(0x1fa):return $prefs[_0x42fea1(0x249)](_0xe96189);case _0x42fea1(0x1ba):return this[_0x42fea1(0x26c)]=this[_0x42fea1(0x1e0)](),this['data'][_0xe96189];default:return this[_0x42fea1(0x26c)]&&this['data'][_0xe96189]||null;}}[_0x4b89be(0x261)](_0x5ebc10,_0x29cba7){const _0x551ce8=_0x4b89be;switch(this[_0x551ce8(0x1f0)]()){case'Surge':case _0x551ce8(0x1b9):case _0x551ce8(0x1fb):case'Shadowrocket':return $persistentStore[_0x551ce8(0x206)](_0x5ebc10,_0x29cba7);case _0x551ce8(0x1fa):return $prefs[_0x551ce8(0x1cd)](_0x5ebc10,_0x29cba7);case'Node.js':return this[_0x551ce8(0x26c)]=this[_0x551ce8(0x1e0)](),this[_0x551ce8(0x26c)][_0x29cba7]=_0x5ebc10,this[_0x551ce8(0x264)](),!0x0;default:return this[_0x551ce8(0x26c)]&&this[_0x551ce8(0x26c)][_0x29cba7]||null;}}['initGotEnv'](_0x4bfa2b){const _0xe81bc3=_0x4b89be;this[_0xe81bc3(0x21d)]=this['got']?this[_0xe81bc3(0x21d)]:require(_0xe81bc3(0x21d)),this['cktough']=this[_0xe81bc3(0x1de)]?this[_0xe81bc3(0x1de)]:require(_0xe81bc3(0x1fd)),this[_0xe81bc3(0x1b5)]=this[_0xe81bc3(0x1b5)]?this['ckjar']:new this[(_0xe81bc3(0x1de))]['CookieJar'](),_0x4bfa2b&&(_0x4bfa2b[_0xe81bc3(0x246)]=_0x4bfa2b[_0xe81bc3(0x246)]?_0x4bfa2b[_0xe81bc3(0x246)]:{},void 0x0===_0x4bfa2b[_0xe81bc3(0x246)]['Cookie']&&void 0x0===_0x4bfa2b[_0xe81bc3(0x255)]&&(_0x4bfa2b[_0xe81bc3(0x255)]=this['ckjar']));}[_0x4b89be(0x1b7)](_0x854605,_0x381dd4=()=>{}){const _0x4e49fe=_0x4b89be;switch(_0x854605[_0x4e49fe(0x246)]&&(delete _0x854605[_0x4e49fe(0x246)][_0x4e49fe(0x1ec)],delete _0x854605['headers'][_0x4e49fe(0x25f)],delete _0x854605['headers'][_0x4e49fe(0x22b)],delete _0x854605[_0x4e49fe(0x246)]['content-length']),_0x854605[_0x4e49fe(0x1d1)]&&(_0x854605[_0x4e49fe(0x1d2)]+='?'+this[_0x4e49fe(0x238)](_0x854605[_0x4e49fe(0x1d1)])),this[_0x4e49fe(0x1f0)]()){case _0x4e49fe(0x214):case'Loon':case'Stash':case'Shadowrocket':default:this[_0x4e49fe(0x1c2)]()&&this[_0x4e49fe(0x23f)]&&(_0x854605['headers']=_0x854605[_0x4e49fe(0x246)]||{},Object[_0x4e49fe(0x25b)](_0x854605[_0x4e49fe(0x246)],{'X-Surge-Skip-Scripting':!0x1})),$httpClient[_0x4e49fe(0x1b7)](_0x854605,(_0x3f7413,_0x1b8511,_0x187401)=>{const _0x105742=_0x4e49fe;!_0x3f7413&&_0x1b8511&&(_0x1b8511[_0x105742(0x215)]=_0x187401,_0x1b8511['statusCode']=_0x1b8511['status']?_0x1b8511[_0x105742(0x1be)]:_0x1b8511['statusCode'],_0x1b8511[_0x105742(0x1be)]=_0x1b8511[_0x105742(0x227)]),_0x381dd4(_0x3f7413,_0x1b8511,_0x187401);});break;case _0x4e49fe(0x1fa):this[_0x4e49fe(0x23f)]&&(_0x854605['opts']=_0x854605[_0x4e49fe(0x26f)]||{},Object[_0x4e49fe(0x25b)](_0x854605[_0x4e49fe(0x26f)],{'hints':!0x1})),$task[_0x4e49fe(0x1b4)](_0x854605)[_0x4e49fe(0x1dd)](_0x542795=>{const {statusCode:_0x381a64,statusCode:_0x725a0e,headers:_0x1c3ae5,body:_0x5a041f,bodyBytes:_0x688ae9}=_0x542795;_0x381dd4(null,{'status':_0x381a64,'statusCode':_0x725a0e,'headers':_0x1c3ae5,'body':_0x5a041f,'bodyBytes':_0x688ae9},_0x5a041f,_0x688ae9);},_0x347dcc=>_0x381dd4(_0x347dcc&&_0x347dcc['error']||_0x4e49fe(0x20c)));break;case _0x4e49fe(0x1ba):let _0x183b14=require(_0x4e49fe(0x24c));this['initGotEnv'](_0x854605),this['got'](_0x854605)['on'](_0x4e49fe(0x1c3),(_0xd9ee11,_0x4ced27)=>{const _0x52adad=_0x4e49fe;try{if(_0xd9ee11[_0x52adad(0x246)][_0x52adad(0x1d3)]){const _0x52a813=_0xd9ee11[_0x52adad(0x246)]['set-cookie']['map'](this[_0x52adad(0x1de)]['Cookie'][_0x52adad(0x1cb)])['toString']();_0x52a813&&this[_0x52adad(0x1b5)][_0x52adad(0x271)](_0x52a813,null),_0x4ced27[_0x52adad(0x255)]=this[_0x52adad(0x1b5)];}}catch(_0x12f947){this[_0x52adad(0x1bb)](_0x12f947);}})[_0x4e49fe(0x1dd)](_0x1b9b69=>{const _0xccd0bf=_0x4e49fe,{statusCode:_0x5dacfd,statusCode:_0x4f4cae,headers:_0x2c2eeb,rawBody:_0x3efbcc}=_0x1b9b69,_0x15f5f1=_0x183b14['decode'](_0x3efbcc,this[_0xccd0bf(0x242)]);_0x381dd4(null,{'status':_0x5dacfd,'statusCode':_0x4f4cae,'headers':_0x2c2eeb,'rawBody':_0x3efbcc,'body':_0x15f5f1},_0x15f5f1);},_0x9390e=>{const _0x5f1c7a=_0x4e49fe,{message:_0x3a5cee,response:_0xb7449e}=_0x9390e;_0x381dd4(_0x3a5cee,_0xb7449e,_0xb7449e&&_0x183b14[_0x5f1c7a(0x231)](_0xb7449e[_0x5f1c7a(0x1cc)],this[_0x5f1c7a(0x242)]));});}}[_0x4b89be(0x24a)](_0x1b9c63,_0x5858ea=()=>{}){const _0x530d78=_0x4b89be,_0x20d32e=_0x1b9c63[_0x530d78(0x265)]?_0x1b9c63[_0x530d78(0x265)]['toLocaleLowerCase']():_0x530d78(0x24a);switch(_0x1b9c63[_0x530d78(0x215)]&&_0x1b9c63['headers']&&!_0x1b9c63[_0x530d78(0x246)]['Content-Type']&&!_0x1b9c63[_0x530d78(0x246)]['content-type']&&(_0x1b9c63[_0x530d78(0x246)]['content-type']=_0x530d78(0x252)),_0x1b9c63[_0x530d78(0x246)]&&(delete _0x1b9c63[_0x530d78(0x246)][_0x530d78(0x25f)],delete _0x1b9c63['headers'][_0x530d78(0x212)]),this['getEnv']()){case _0x530d78(0x214):case _0x530d78(0x1b9):case _0x530d78(0x1fb):case _0x530d78(0x1d6):default:this[_0x530d78(0x1c2)]()&&this[_0x530d78(0x23f)]&&(_0x1b9c63[_0x530d78(0x246)]=_0x1b9c63[_0x530d78(0x246)]||{},Object['assign'](_0x1b9c63[_0x530d78(0x246)],{'X-Surge-Skip-Scripting':!0x1})),$httpClient[_0x20d32e](_0x1b9c63,(_0x4040c0,_0x368962,_0x80cda0)=>{const _0x5c1e13=_0x530d78;!_0x4040c0&&_0x368962&&(_0x368962[_0x5c1e13(0x215)]=_0x80cda0,_0x368962[_0x5c1e13(0x227)]=_0x368962[_0x5c1e13(0x1be)]?_0x368962['status']:_0x368962[_0x5c1e13(0x227)],_0x368962[_0x5c1e13(0x1be)]=_0x368962['statusCode']),_0x5858ea(_0x4040c0,_0x368962,_0x80cda0);});break;case'Quantumult\x20X':_0x1b9c63[_0x530d78(0x265)]=_0x20d32e,this[_0x530d78(0x23f)]&&(_0x1b9c63[_0x530d78(0x26f)]=_0x1b9c63['opts']||{},Object['assign'](_0x1b9c63[_0x530d78(0x26f)],{'hints':!0x1})),$task[_0x530d78(0x1b4)](_0x1b9c63)[_0x530d78(0x1dd)](_0x5255dd=>{const {statusCode:_0x254ce5,statusCode:_0x48e3c0,headers:_0x5b69ff,body:_0x45c246,bodyBytes:_0x39be35}=_0x5255dd;_0x5858ea(null,{'status':_0x254ce5,'statusCode':_0x48e3c0,'headers':_0x5b69ff,'body':_0x45c246,'bodyBytes':_0x39be35},_0x45c246,_0x39be35);},_0x3bfc99=>_0x5858ea(_0x3bfc99&&_0x3bfc99['error']||_0x530d78(0x20c)));break;case _0x530d78(0x1ba):let _0x27b562=require(_0x530d78(0x24c));this['initGotEnv'](_0x1b9c63);const {url:_0xd6ccb4,..._0x59e756}=_0x1b9c63;this[_0x530d78(0x21d)][_0x20d32e](_0xd6ccb4,_0x59e756)[_0x530d78(0x1dd)](_0x1a36e0=>{const _0xd18527=_0x530d78,{statusCode:_0x257f9d,statusCode:_0x486181,headers:_0x20d1e5,rawBody:_0x46cea0}=_0x1a36e0,_0x43caf7=_0x27b562[_0xd18527(0x231)](_0x46cea0,this[_0xd18527(0x242)]);_0x5858ea(null,{'status':_0x257f9d,'statusCode':_0x486181,'headers':_0x20d1e5,'rawBody':_0x46cea0,'body':_0x43caf7},_0x43caf7);},_0x4c03d0=>{const _0x30ea9b=_0x530d78,{message:_0x303025,response:_0x4ba7ec}=_0x4c03d0;_0x5858ea(_0x303025,_0x4ba7ec,_0x4ba7ec&&_0x27b562['decode'](_0x4ba7ec[_0x30ea9b(0x1cc)],this[_0x30ea9b(0x242)]));});}}[_0x4b89be(0x1f3)](_0x212528,_0x491596=null){const _0x161546=_0x4b89be,_0x5a3d04=_0x491596?new Date(_0x491596):new Date();let _0x9df5fb={'M+':_0x5a3d04[_0x161546(0x1ce)]()+0x1,'d+':_0x5a3d04[_0x161546(0x210)](),'H+':_0x5a3d04['getHours'](),'m+':_0x5a3d04['getMinutes'](),'s+':_0x5a3d04[_0x161546(0x23c)](),'q+':Math[_0x161546(0x209)]((_0x5a3d04['getMonth']()+0x3)/0x3),'S':_0x5a3d04[_0x161546(0x1c9)]()};/(y+)/[_0x161546(0x234)](_0x212528)&&(_0x212528=_0x212528['replace'](RegExp['$1'],(_0x5a3d04['getFullYear']()+'')[_0x161546(0x20f)](0x4-RegExp['$1'][_0x161546(0x1bd)])));for(let _0x45d79e in _0x9df5fb)new RegExp('('+_0x45d79e+')')[_0x161546(0x234)](_0x212528)&&(_0x212528=_0x212528[_0x161546(0x268)](RegExp['$1'],0x1==RegExp['$1'][_0x161546(0x1bd)]?_0x9df5fb[_0x45d79e]:('00'+_0x9df5fb[_0x45d79e])[_0x161546(0x20f)]((''+_0x9df5fb[_0x45d79e])[_0x161546(0x1bd)])));return _0x212528;}[_0x4b89be(0x238)](_0x16a89a){const _0x2b2145=_0x4b89be;let _0x2a84e8='';for(const _0x11c4a6 in _0x16a89a){let _0x2ecb4c=_0x16a89a[_0x11c4a6];null!=_0x2ecb4c&&''!==_0x2ecb4c&&(_0x2b2145(0x1e4)==typeof _0x2ecb4c&&(_0x2ecb4c=JSON['stringify'](_0x2ecb4c)),_0x2a84e8+=_0x11c4a6+'='+_0x2ecb4c+'&');}return _0x2a84e8=_0x2a84e8[_0x2b2145(0x260)](0x0,_0x2a84e8[_0x2b2145(0x1bd)]-0x1),_0x2a84e8;}['msg'](_0x5ed9aa=_0x49e302,_0x48e695='',_0x5b09f7='',_0x2bae1b){const _0xab35d2=_0x4b89be,_0x5f0a23=_0x5bd925=>{const _0x34d18a=_0x109f;switch(typeof _0x5bd925){case void 0x0:return _0x5bd925;case'string':switch(this['getEnv']()){case _0x34d18a(0x214):case _0x34d18a(0x1fb):default:return{'url':_0x5bd925};case _0x34d18a(0x1b9):case _0x34d18a(0x1d6):return _0x5bd925;case'Quantumult\x20X':return{'open-url':_0x5bd925};case _0x34d18a(0x1ba):return;}case'object':switch(this[_0x34d18a(0x1f0)]()){case'Surge':case _0x34d18a(0x1fb):case _0x34d18a(0x1d6):default:{let _0x2b16b2=_0x5bd925[_0x34d18a(0x1d2)]||_0x5bd925['openUrl']||_0x5bd925['open-url'];return{'url':_0x2b16b2};}case _0x34d18a(0x1b9):{let _0x521074=_0x5bd925[_0x34d18a(0x22f)]||_0x5bd925[_0x34d18a(0x1d2)]||_0x5bd925[_0x34d18a(0x20b)],_0x44845a=_0x5bd925[_0x34d18a(0x1da)]||_0x5bd925['media-url'];return{'openUrl':_0x521074,'mediaUrl':_0x44845a};}case _0x34d18a(0x1fa):{let _0x894fc8=_0x5bd925[_0x34d18a(0x20b)]||_0x5bd925[_0x34d18a(0x1d2)]||_0x5bd925[_0x34d18a(0x22f)],_0x23cdc4=_0x5bd925[_0x34d18a(0x24d)]||_0x5bd925[_0x34d18a(0x1da)],_0x417096=_0x5bd925[_0x34d18a(0x243)]||_0x5bd925[_0x34d18a(0x1c4)];return{'open-url':_0x894fc8,'media-url':_0x23cdc4,'update-pasteboard':_0x417096};}case _0x34d18a(0x1ba):return;}default:return;}};if(!this['isMute'])switch(this[_0xab35d2(0x1f0)]()){case'Surge':case'Loon':case'Stash':case _0xab35d2(0x1d6):default:$notification[_0xab35d2(0x24a)](_0x5ed9aa,_0x48e695,_0x5b09f7,_0x5f0a23(_0x2bae1b));break;case _0xab35d2(0x1fa):$notify(_0x5ed9aa,_0x48e695,_0x5b09f7,_0x5f0a23(_0x2bae1b));break;case _0xab35d2(0x1ba):}if(!this[_0xab35d2(0x266)]){let _0x228252=['',_0xab35d2(0x1d4)];_0x228252[_0xab35d2(0x24e)](_0x5ed9aa),_0x48e695&&_0x228252[_0xab35d2(0x24e)](_0x48e695),_0x5b09f7&&_0x228252[_0xab35d2(0x24e)](_0x5b09f7),console[_0xab35d2(0x25a)](_0x228252[_0xab35d2(0x26a)]('\x0a')),this[_0xab35d2(0x240)]=this[_0xab35d2(0x240)][_0xab35d2(0x241)](_0x228252);}}[_0x4b89be(0x25a)](..._0x48e000){const _0x415d0e=_0x4b89be;_0x48e000[_0x415d0e(0x1bd)]>0x0&&(this['logs']=[...this[_0x415d0e(0x240)],..._0x48e000]),console[_0x415d0e(0x25a)](_0x48e000[_0x415d0e(0x26a)](this[_0x415d0e(0x254)]));}[_0x4b89be(0x1bb)](_0x2f7ae4,_0x53bb60){const _0x590b21=_0x4b89be;switch(this['getEnv']()){case'Surge':case _0x590b21(0x1b9):case _0x590b21(0x1fb):case _0x590b21(0x1d6):case _0x590b21(0x1fa):default:this['log']('','❗️'+this[_0x590b21(0x1d9)]+_0x590b21(0x26d),_0x2f7ae4);break;case _0x590b21(0x1ba):this['log']('','❗️'+this[_0x590b21(0x1d9)]+_0x590b21(0x26d),_0x2f7ae4[_0x590b21(0x1d5)]);}}['wait'](_0x11c8c5){return new Promise(_0x53c0db=>setTimeout(_0x53c0db,_0x11c8c5));}[_0x4b89be(0x223)](_0x193986={}){const _0x30df5b=_0x4b89be,_0x361d38=new Date()[_0x30df5b(0x245)](),_0x3b7ac2=(_0x361d38-this[_0x30df5b(0x1df)])/0x3e8;switch(this['log']('','🔔'+this[_0x30df5b(0x1d9)]+_0x30df5b(0x247)+_0x3b7ac2+'\x20秒'),this[_0x30df5b(0x25a)](),this[_0x30df5b(0x1f0)]()){case'Surge':case _0x30df5b(0x1b9):case _0x30df5b(0x1fb):case _0x30df5b(0x1d6):case'Quantumult\x20X':default:$done(_0x193986);break;case _0x30df5b(0x1ba):process[_0x30df5b(0x22a)](0x1);}}}(_0x49e302,_0x2bcf1b);}